#!/bin/bash

if [[ "$HAVE_HOMEBREW" == 1 && -f "$HOMEBREW/bin/nvim" ]]; then
    # Use brewn nvim if there is one
    if [[ -n "${VIRTUAL_ENV}" ]]; then
        export PATH="$(echo $PATH| sed "s:${VIRTUAL_ENV}/bin\:\?::g")"
        unset VIRTUAL_ENV
        hash -r 2>/dev/null
    fi
    export MANPATH=$HOMEBREW/share/man:$MANPATH
    export PATH=$HOMEBREW/bin:$PATH
    exec $HOMEBREW/bin/nvim "$@"
elif [[ -f /usr/bin/nvim ]]; then
    # Try system nvim
    exec /usr/bin/nvim "$@"
else
    # Pray this works
    exec vim "$@"
fi
